@base <https://app.lyncex.com/text#> .
@prefix lcx: <https://lyncex.com/lyncex#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix cnt: <http://www.w3.org/2011/content#> .

<Adrian>
    a foaf:Person ;
    foaf:name "Adri√°n Arroyo" ;
    foaf:age 21 ;
    foaf:title "Internship" .

<Mario>
    a foaf:Person ;
    foaf:name "Mario Arroyo" ;
    foaf:age 18 ;
    foaf:title "Student" .

<ShowPerson>
    a lcx:TemplateController ;
    lcx:url "person" ;
    lcx:template <template/person.html> ;
    lcx:query [
        a lcx:Query ;
        lcx:query_name "person1" ;
        lcx:subject <Adrian>
    ] ;
    lcx:query [
        a lcx:Query ;
        lcx:query_name "person2" ;
        lcx:subject <Mario>
    ] .

<template/person.html>
    a cnt:ContentAsText ;
    cnt:chars "<b>Name: </b>{{ person1.name }}<br><b>Age: </b>{{ person1.age }}<br>Other person is: {{ person2.name }}</p>".

<template/person2.html>
    a cnt:ContentAsText ;
    cnt:chars "<b>Name: </b>{{ person.name }}<br><b>Nombre 2: </b>{{ person1.name }}" .

<template/person3.html>
    a cnt:ContentAsText ;
    cnt:chars "<b>ID: </b>{{ test }}" .

<CodeController>
    a lcx:TemplateController ;
    lcx:url "person2" ;
    lcx:template <template/person2.html> ;
    lcx:handler [
        a lcx:Handler ;
        lcx:handler_name "person" ;
        lcx:code "handler(Input, Output) :- db(_, 'http://xmlns.com/foaf/0.1/name', Name), Output = _{name: Name}."
    ] ;
    lcx:query [
        a lcx:Query ;
        lcx:query_name "person1" ;
        lcx:subject <Mario>
    ] .

<ParamController>
    a lcx:TemplateController ;
    lcx:url "person3" ;
    lcx:template <template/person3.html> ;
    lcx:handler [
        a lcx:Handler ;
        lcx:handler_name "test" ;
        lcx:code "handler(Input, Output) :- param(get, id, Output)."
    ] ;
    lcx:parameter [
        a lcx:Parameter ;
        lcx:param_name "id" ;
        lcx:validation "^[0-9]+$"
    ] .

<ParamController2>
    a lcx:TemplateController ;
    lcx:url "person4" ;
    lcx:template <template/person3.html> ;
    lcx:handler [
        a lcx:Handler ;
        lcx:handler_name "test" ;
        lcx:code "handler(Input, Output) :- param(get, id, Output)."
    ] ;
    lcx:parameter [
        a lcx:Parameter ;
        lcx:param_name "id"
    ] .

<TemplateApp>
    a lcx:Application ;
    lcx:controller <HomeController> ;
    lcx:controller <ShowPerson> ;
    lcx:controller <CodeController> ;
    lcx:controller <ParamController> ;
    lcx:controller <ParamController2> .

<HomeController>
    a lcx:TemplateController ;
    lcx:url "" ;
    lcx:method "get" ;
    lcx:template <template/home.html> .

<template/home.html>
    a cnt:ContentAsText ;
    cnt:chars "<h1>Welcome to Lyncex</h1>" .
